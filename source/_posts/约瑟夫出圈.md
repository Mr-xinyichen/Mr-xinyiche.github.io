---
layout: posts
title: 约瑟夫出圈
date: 2020-04-28 13:35:00
updated: 2020-04-28 13:41:36
tags: 
categories: 
 - 数据结构
---
使用单向循环链表解决约瑟夫问题
	

```java
/**
 * @author cxy
 * 约瑟夫问题：
 *      n个小男孩围城一圈 从第k个孩子开始报数 每报m个数就出圈
 *      假设有5个孩子 从第一个开始 报数2下就出圈 那么出圈的顺序：
 *          2->4->1->5  最终保留3号男孩
 */
public class CircularSingleLinkedListDemo {
    public static void main(String[] args) {
        CircularSingleLinkedList list =
        new CircularSingleLinkedList();
        list.addBoy(5);
        list.circleOut(1,2,5);
    }
}

```

​	
```java
/**
 * 使用环形单向列表
 */
class CircularSingleLinkedList{

    /**
     * 头节点
     */
    private Boy first;

    /**
     *添加节点
     * @param num
     */
    public void addBoy(int num){
        //校验参数
        if (num < 1){
            System.out.println("参数不合法");
            return;
        }
        //辅助指针用于构建环形链表
        Boy cur = null;
        for (int i = 1; i <= num; i++) {
            //根据编号创建节点
            Boy boy = new Boy(i);
            //第一个节点
            if (i == 1){
                //设置第一个个节点first
                this.first = boy;
                //指向first
                boy.setNext(first);
                //辅助指针指向第一个节点
                cur = first;
            }else {
                //指向第一个节点
                boy.setNext(first);
                //设置当前节点的下一个节点为新建节点
                cur.setNext(boy);
                //移动指针
                cur = cur.getNext();
            }
        }
    }
```


​	
```java
    /**
     * 打印链表
     */
    public void printList(){
        if (first == null){
            System.out.println("链表中无节点");
            return;
        }
        //辅助指针
        Boy cur = this.first ;

        while (true){
            System.out.println("当前节点的编号为："+cur.getId());
            //下一个节点为first时遍历结束
            if (cur.getNext() == first){
                break;
            }
            //移动指针！！！
            cur = cur.getNext();
        }

    }

    /**
     * 出圈
     * @param startNum 开始的节点
     * @param step 移动的步进
     * @param count 总共的节点数量
     */
    public void circleOut(int startNum,int step,int count){
        //判空
        if (first == null){
            System.out.println("链表中不存在节点");
        }
        //参数校验
        if(startNum<0 || startNum>count){
            System.out.println("参数不合法");
            return;
        }
        //建立辅助指针
        Boy helper = this.first;
        //把辅助指针移动到first之前
        while (helper.getNext() != first){
            helper = helper.getNext();
        }
        //把头指针移动到开始的节点
        for (int i = 0; i < startNum -1; i++) {
            first = first.getNext();
            helper =  helper.getNext();
        }
        //开始出圈
        while (true) {
            //移动指针找到要出圈的节点
            for (int j = 0; j < step - 1; j++) {
                first = first.getNext();
                helper = helper.getNext();
            }
            //此时first所指的节点即为要出圈的节点
            System.out.println("出圈的节点为:"+first.getId());
            //执行出圈操作
            //first后移一位
            first = first.getNext();
            //辅助指针指向的节点的下一个节点指向first
            helper.setNext(first);
            //如果辅助指针和first重合那么链表只剩下一个节点
            if (helper == first){
                System.out.println("最终留下的节点为:"+first.getId());
                break;
            }

        }
    }
}

/**
 * 节点
 */
class Boy{
    /**
     * 节点编号
     */
    private int id;
    /**
     * 下个节点的指针 默认为null
     */
    private Boy next;

    public Boy(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    /**
     * 虽说用不到setId 但还是习惯性的给出
     * @param id
     */
    public void setId(int id) {
        this.id = id;
    }

    public Boy getNext() {
        return next;
    }

    public void setNext(Boy next) {
        this.next = next;
    }

}
```

## 打印

```java
出圈的节点为:2
出圈的节点为:4
出圈的节点为:1
出圈的节点为:5
最终留下的节点为:3
```